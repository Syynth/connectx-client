###
Expects react component to implement a method named 'getStateFromStores' which returns a state object
###
module.exports = (Store) ->
  componentWillMount: ->
    Store.addChangeListener @_onStatefulStoreChange
  componentWillUnmount: ->
    Store.removeChangeListener @_onStatefulStoreChange
  _onStatefulStoreChange: -> @setState @getStateFromStores()
  getInitialState: -> @getStateFromStores()
