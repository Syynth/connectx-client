NotificationActionCreators = require 'connectx/actions/notificationActionCreators'
req = require 'superagent'
{ApiUrl} = require 'connectx/constants'

module.exports =
  postLogin: (user, cb) ->
    req.post "#{ApiUrl}/login"
      .type 'form'
      .withCredentials()
      .send user
      .end (res ) ->
        NotificationActionCreators.postNotification {message: res.body}
        cb res.body
