guid = require 'guid'
{CurrentUserStore} = require 'connectx/stores'

module.exports =
  token: -> CurrentUserStore.getCurrentUser()?.token
  stubs:
    getRandomError: (failureRate = 0.5) ->
      if Math.random() < failureRate
        {message: 'Stub!'}
      else
        null
    getNetworkDelay: (offset, variability)->
      (500 + offset) + Math.random() * (300 + variability)
    getServerId: -> "ServerId#{guid.create().value}"
