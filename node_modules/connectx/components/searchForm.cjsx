# @cjsx React.DOM

React = require 'react'
{CheckKeys} = require 'connectx/mixins'
{Navigation} = require 'react-router'

{NotificationActionCreators} = require 'connectx/actions'

SearchForm = module.exports = React.createClass
  mixins: [CheckKeys, Navigation]
  getInitialState: -> {query: ''}
  updateQuery: (ev) -> @setState query: ev.target.value
  enterPressed: -> @search()
  search: ->
    if @state.query.length > 0
      @transitionTo 'search', {query: @state.query}
    else
      NotificationActionCreators.postNotification {message: 'You must enter a query to search'}
  render: ->
    <div className="search_wrapper">
      <input  className="search_field"
              value={@state.query}
              ref="query"
              onChange={@updateQuery}
              onKeyDown={@checkEnter}
              placeholder="Search Golf Connectx"
              type="search" />
      <button className="submit_search" onClick={@search}>
        <i className="fa fa-search" />
      </button>
    </div>
