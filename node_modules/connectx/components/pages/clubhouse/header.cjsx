# @cjsx React.DOM

React = require 'react'
{Link, RouteHandler} = require 'react-router'
ImageUrls = require 'connectx/mixins/imageUrl'
SearchForm = require 'connectx/components/searchForm'
Nav = require './nav'
Icon = require 'connectx/components/icon'

Header = module.exports = React.createClass
  mixins: [ImageUrls] # TODO: Refactor to make consistant with {current, entity} pattern
  render: ->
    <div>
      <section className="roof" />
      <section className="ch_name_wrapper">
        <p className="clubhouse_name">{@props.user.name + "'s Clubhouse"}</p>
      </section>
      <section className="sub_roof">
        <section className="cover_img">
          <figure className="cover-fig">
            <img className="cover-img" src={@getCoverPhoto @props.user}/>
          </figure>
        </section>
        <div className="pic">
          <figure className="overlay">
            <img className="profile_img" src={@getProfilePhoto @props.user} />
          </figure>
        </div>
      </section>
      <section className="entity_nav_wrapper">
        <div className="user_info_wrapper">
          <div className="user_info">
            <div className="name">
              <span>{@props.user.name}</span>
              <img src="img/icons/flag_green.png" />
            </div>
            <Icon fa-envelope-o />
            <Link to="clubhouse.messages">Message</Link>
          </div>
        </div>
        <Nav current={@props.current} />
        <div className="partition search_split"><SearchForm /></div>
      </section>
    </div>
