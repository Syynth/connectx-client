# @cjsx React.DOM

React = require 'react'
{Link, RouteHandler} = require 'react-router'
ImageUrls = require 'connectx/mixins/imageUrl'
SearchForm = require 'connectx/components/search/form'
UserNav = require './usernav'

Header = module.exports = React.createClass
  mixins: [ImageUrls]
  render: ->
    <div>
      <section className="roof" />
      <section className="ch_name_wrapper">
        <p className="clubhouse_name">{@props.user.name + "'s Clubhouse"}</p>
      </section>
      <section className="sub_roof">
        <section className="cover_img">
          <figure className="cover-fig">
            <img className="cover-img" src={@getCoverPhoto @props.user}/>
          </figure>
        </section>
        <div className="pic">
          <figure className="overlay">
            <img className="profile_img" src={@getProfilePhoto @props.user} />
          </figure>
        </div>
      </section>
      <section className="entity_nav_wrapper">
        <div className="user_info_wrapper">
          <div className="user_info">
            <span>{@props.user.name}</span>
            <img src="img/icons/flag_green.png" />
            {
              if @props.current
                <i className="fa fa-envelope-o" />
                <Link to="clubhouse.messages">Message</Link>
              else
                <div />
                #<ModalTrigger modal={<ComposeModal />}><button>Message</button></ModalTrigger>
            }
          </div>
        </div>
        <UserNav {...@props} />
        <div className="partition search_split"><SearchForm /></div>
      </section>
    </div>
