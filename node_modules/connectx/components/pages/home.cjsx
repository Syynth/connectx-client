# @cjsx React.DOM

React = require 'react'
{Link, Navigation} = require 'react-router'
HomeNav = require './home/homenav'
HomeTabs = require './home/hometabs'
{CurrentUserStore} = require 'connectx/stores'
StoreListener = require 'connectx/mixins/storeListener'
{ModalTrigger} = require 'react-bootstrap'
RegisterModal = require '../registerModal'

getStateFromStore = -> isLoggedIn: CurrentUserStore.isLoggedIn()

Home = module.exports = React.createClass
  mixins: [(StoreListener CurrentUserStore), Navigation]
  getInitialState: getStateFromStore
  onChange: ->
    @setState getStateFromStore(), =>
      if @state.isLoggedIn
        @transitionTo 'clubhouse'
  render: ->
    unless @state.isLoggedIn
      profileLink = <ModalTrigger modal={<RegisterModal />}><button className="register">Create Profile</button></ModalTrigger>
      featuresSignup = <ModalTrigger modal={<RegisterModal />}><a className="register"><figure><img className="join" src="img/btns/join.png" /></figure></a></ModalTrigger>
      midSection =
        <section className="mid">
          <article className="partition keypoints">
            <figure><img src="img/banner.png" /></figure>
          </article>
          <article className="partition golf_ball">
            <ModalTrigger modal={<RegisterModal />}>
              <a className="register">
                <figure><img height="200" src="img/golfTee.png" /></figure>
              </a>
            </ModalTrigger>
          </article>
        </section>
    else
      profileLink = <p><Link className="clubhouse" to="clubhouse">View your clubhouse</Link></p>
      midSection = <section className="emtpy_mid" />
      featuresSignup = <span />
    <div>
      <div className="home_wrapper shadow">
        <header className="home" role="banner">
          <section className="partition logo">
            <figure><img src="img/logo.png" /></figure>
          </section>
          <HomeNav isLoggedIn={@state.isLoggedIn} />
        </header>
        <main>
          <hr className="divider_tag" />
          <section className="about">
            <article className="partition">
              <h2>Golf Connectx is a free site designed by golfers for golfers as an easy way to manage your golf life and stay organized</h2>
              <p>Golf Connectx is a FREE social networking site exclusively for those passionate about the game of golf. As our name states, we’re about CONNECTING with others who share an EXTREME ENTHUSIASM for “The Greatest Game Ever Played.” No more sifting through the clutter of other sites, we are here to help you get connected to the friends, groups, courses, and events that you want whenever and wherever you are, 24/7.</p>
              {profileLink}
            </article>
            <iframe className="partition home-vid" allowFullScreen="true" frameborder="0" height="264" width="450" src="http://player.vimeo.com/video/75112407"/>
          </section>
          {midSection}
          <section className="section">
            <div className="partition search">
              <figure><img className="header" src="img/icons/search.png" /></figure>
              <h1 className="one-edge-shadow">Connectx Search</h1>
              <ul id="search">
                <li className="groups">
                  <Link to="home"><div className="linkBtn" /></Link>
                </li>
                <li className="golfers">
                  <Link to="home"><div className="linkBtn" /></Link>
                </li>
                <li className="events">
                  <Link to="home"><div className="linkBtn" /></Link>
                </li>
              </ul>
              <div className="community">
                <figure><img className="header" src="img/icons/flag.png" /></figure>
                <h1 className="Browse one-edge-shadow">Browse Community</h1>
              </div>
            </div>
            <div className="partition features">
              <figure><img className="header" src="img/icons/cart.png" /></figure>
              <h1 className="one-edge-shadow">Connectx Features</h1>
              <ul id="features">
                <li className="odd">
                  <div>
                    <strong>PRIVACY</strong>
                    - Exclusive log in and privacy settings
                  </div>
                </li>
                <li className="even">
                  <div>
                    <strong>PERSONAL FEATURES</strong>
                    - Share accomplishments, socialize with friends, connect with your groups
                  </div>
                </li>
                <li className="odd">
                  <div>
                    <strong>GROUP FEATURES</strong>
                    - Stay connected to those you Golf with regularly
                  </div>
                </li>
                <li className="even">
                  <div>
                    <strong>EVENT FEATURES</strong>
                    - We offer announcements, invitations, RSVP tracking, and reminders
                  </div>
                </li>
              </ul>
              {featuresSignup}
            </div>
            <div className="partition blog">
              <figure><img className="header" src="img/icons/rss.png" /></figure>
              <h1 className="one-edge-shadow">Connectx Blog</h1>
              <div className="blog_item">
                <img className="shadowLight" src="img/Laser-Putt-bnr.jpg" />
                <span className="headline">Gadget Review: Laser Putt...</span>
                <p>You take Ball Go Far and pair it with an improved Speed Pocket that offers greater ball speeds without the need to constantly clean debris and other miscellaneous crap out of the slot, toss in 1.5° of loft adjustability, and you’ve basically got the complete story of the new SLDR Fairways and Rescues...</p>
                <Link className="scrolllink read" to="home">read more</Link>
              </div>
            </div>
          </section>
          <HomeTabs />
        </main>
        <div id="sponsor">
          <figure><img className="whitebg" src="img/sponsors.png" /></figure>
        </div>
      </div>
      <footer className="footer">
        <ul className="footer_item">
          <li><Link className="scroll" to="home">Contact</Link></li>
          <li><Link className="scroll" to="home">Advertise</Link></li>
          <li><Link className="scroll" to="home">Terms of Use</Link></li>
          <li><Link className="scroll" to="home">Privacy Policy</Link></li>
          <li><Link className="scroll" to="home">Media Inquiries</Link></li>
          <li className="lastChild"><a href="http://www.brainbytescreative.com/" target="_blank">Golf Connectx LLC © 2013 by Brain Bytes Creative</a></li>
        </ul>
      </footer>
    </div>
