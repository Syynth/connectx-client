# @cjsx React.DOM

React = require 'react'
{PostStore} = require 'connectx/stores'
{AutoStoreListener} = require 'connectx/mixins'
Post = require './post'

{PostActionCreators} = require 'connectx/actions'

PostList = module.exports = React.createClass
  mixins: [AutoStoreListener PostStore]
  componentWillMount: ->
    PostActionCreators.queryPostsByEntity @props.entity
  #componentWillUpdate: (props) ->
    #PostActionCreators.queryPostsByEntity props.entity
  render: ->
    <div className="the_post_holder">
    {
      PostStore.getByOwnerId @props.entity.id
        .sort (a, b) -> a.createdAt < b.createdAt
        .map (p) => <Post {...@props} {...p} postId={p.getId()} key={p.getId()} />
    }
    </div>
