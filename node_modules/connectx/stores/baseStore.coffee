
{EventEmitter} = require 'events'

ChangeEvent = 'change'

class BaseStore extends EventEmitter
  emitChange: ->
    @emit ChangeEvent
  addChangeListener: (cb) ->
    @on ChangeEvent, cb
  removeChangeListener: (cb) ->
    @removeListener ChangeEvent, cb
  handleDispatch: (data) -> # TODO: Test this
    for handler in @handlers
      if handler.source is data.source and handler.type is data.action.type
        handler.fn.call @, data

module.exports = BaseStore
