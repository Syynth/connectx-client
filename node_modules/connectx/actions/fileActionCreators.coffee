
{FileApi} = require 'connectx/remotes'

EntityActionCreators = require './entityActionCreators'
NotificationActionCreators = require './notificationActionCreators'

module.exports =

  uploadFileToEntity: (entity, file, fieldName) ->
    FileApi.uploadFile file
      .then (url) ->
        EntityActionCreators.setField entity, fieldName, url
      .catch (err) ->
        NotificationActionCreators.postNotification {message: 'An error occurred while uploading your image, please try again', status: 'failure'}
